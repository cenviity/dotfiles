"$schema" = "https://jj-vcs.github.io/jj/latest/config-schema.json"

[user]
name = "Vincent Ging Ho Yim"
email = "cenviity@gmail.com"

[ui]
default-command = "log"
# diff.format = "git"
{{- if lookPath "difft" }}
diff.tool = "difft"
{{- end }}
diff-editor = ":builtin"
merge-editor = "vscode"
# pager = "delta"
# pager = ["less", "-FRX"]
pager = ":builtin"

[merge-tools.difft]
diff-args = ["--color=always", "$left", "$right"]
diff-invocation-mode = "file-by-file"

[hints]
resolving-conflicts = false

[colors]
# Highlight hunks with background
"diff removed token" = { bg = "#221111", underline = false }
"diff added token" = { bg = "#002200", underline = false }

[templates]
log = "builtin_log_compact__wip"

[revset-aliases]
# See https://github.com/jj-vcs/jj/blob/main/cli/src/config/revsets.toml
default = "present(@) | ancestors(immutable_heads().., 2) | present(trunk())"
private-commits = "description(glob-i:'wip:*') | description(glob-i:'private:*')"
# Revisions including and after the closest described revision
wip_branch = "heads(::@ ~ description(exact:''))::@ & mutable()"

[template-aliases]
builtin_log_compact__wip = '''
if(root,
  format_root_commit(self),
  label(if(current_working_copy, "working_copy"),
    separate("\n",
      format_short_commit_header(self),
      separate(" ",
        if(empty, label("empty", "(empty)")),
        if(description,
          description.first_line(),
          label(if(empty, "empty"), description_placeholder),
        ),
      ),
      if(self.contained_in("wip_branch"), diff.summary()),
    ),
  )
)
'''

[aliases]
ci = ["commit"]
nc = ["next", "--conflict"]
pc = ["prev", "--conflict"]
rb = ["rebase"]
sq = ["squash"]
w = ["watch"]
watch = [
    "util",
    "exec",
    "--",
    "sh",
    "-c",
    "hwatch --color --no-title --interval 1 jj log --color always",
]

[gg.ui]
theme-override = "dark"
